[phases.setup]
nixPkgs = ["python311", "uv", "nodejs_20"]

[phases.install]
cmds = [
    "mkdir -p /opt/cline",
    "npm install -g --prefix /opt/cline cline",
    "uv sync --no-dev --frozen",
]

[start]
cmd = "python run_game.py"

[variables]
# Explicitly use uv as the package manager
NIXPACKS_PYTHON_PACKAGE_MANAGER = "uv"
# Python unbuffered output for better logging
PYTHONUNBUFFERED = "1"
PATH = "/opt/cline/bin:/opt/venv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
